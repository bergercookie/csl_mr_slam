<?xml version="1.0"?>

<!--

Setup the hardware drivers and other platform-specific nodes for a SLAM agent.
Launchfile is to be run on the platform that traverses the environment during
the SLAM procedure. That platform is not necessarily the platform that the SLAM
computations take place (see run_sr_graphslam.launch for the latter).

-->

<launch>

    <arg name="output" default="$(env MR_OUTPUT_MESSAGES_TO)"  />
    <arg name="plumb_dir" value="$(find csl_hw_setup)/launch/plumbing" />
    <arg name="porcelain_dir" value="$(find csl_hw_setup)/launch/porcelain" />
    <arg name = "robot_ns" default="$(env MR_ROBOT_MODEL)_$(env MR_ROBOT_ID)" />

    <!-- Simulation Time? -->
    <param name="/use_sim_time" value="false" />

    <group ns="$(arg robot_ns)">

        <!-- Use Multimaster? -->
        <group if="$(env MR_USE_MULTIMASTER)">
            <include file="$(arg plumb_dir)/setup_multimaster.launch">
            </include>
        </group>

        <!-- Robot HW Drivers -->
        <group if="$(env MR_ROBOT_DRIVERS_USE_POULIAS)">
            <include file="$(arg plumb_dir)/setup_drivers_pioneer_poulias.launch">
            </include>
        </group>
        <group if="$(env MR_ROBOT_DRIVERS_USE_YOUBOT)">
            <include file="$(arg plumb_dir)/setup_drivers_youbot.launch">
            </include>
        </group>
        <group if="$(env MR_ROBOT_DRIVERS_USE_ARIA)">
            <include file="$(arg plumb_dir)/setup_drivers_aria.launch">
            </include>
        </group>

        <!-- LaserScan Matcher -->
        <group if="$(env MR_USE_LASER)">
            <include file="$(arg plumb_dir)/setup_laser_$(env MR_LASER_NAME).launch">
            </include>
        </group>

        <!--Camera for identifying the relative transformation to another robot-->
        <group if="$(env MR_USE_ONBOARD_CAMERA)">
            <include file="$(arg plumb_dir)/setup_onboard_camera.launch"/>
        </group>

    </group>

</launch>
