<?xml version="1.0"?>

<!--
Mon Sep 26 21:29:42 EEST 2016, Nikos Koukis

Launchfile is used for starting up all the necessary nodes in order to drive
around a robot either pioneer-3dx or pioneer-2at and record its odometry
measurements and measurements of a mounted hokuyo laser scanner.

The following situation is assumed:
- Hokuyo laser is mounted and is available vai a /dev device.
- An arduino is used for controlling the motors of the wheel motors.
Communication with the arduino is achived via a /dev device.

-->
<launch>

	<!-- LAUNCH ARGUMENTS -->
	<!-- ************************************* -->
	<arg name="hokuyo_port"   default="/dev/ttyACM1"                       />
	<arg name="scan_topic"    default="/graphslam_engine/input/laser_scan" />
	<arg name="arduino_port"  default="/dev/ttyACM0"                       />
	<arg name="joystick_port" default="/dev/input/js0"                     />
	<arg name="output"        default="screen"                             />
	<arg name="robot_model"   default="2at"                                />
	<arg name="odom_topic"    default="/graphslam_engine/input/odom"       />


    <!-- LAUNCH PARAMETERS -->
	<!-- ************************************* -->
	<param name="/hokuyo_node/port" value="$(arg hokuyo_port)"   />
	<param name="joy_node/dev"      value="$(arg joystick_port)" />
	<param name="arduino/port"      value="$(arg arduino_port)"  />
	<param name="/use_sim_time"     value="false" type="bool"    />

	<!-- NODES TO BE LAUNCHED -->
	<!-- ************************************* -->
	<node pkg="hokuyo_node"    type="hokuyo_node"                   name="hokuyo_node"                output="$(arg output )" args="/scan:=$(arg scan_topic)"                  />
	<node pkg="arduino_mr"     type="pioneer_$(arg robot_model).py" name="pioneer_$(arg robot_model)" output="$(arg output )" args="/pioneer/position_odom:=$(arg odom_topic)" />
	<node pkg="joy"            type="joy_node"                      name="joy_node"                   output="$(arg output )"                                                  />
	<node pkg="joy_to_arduino" type="teleop_MR_2at"                 name="teleop_MR_2at"              output="$(arg output )"                                                  />
	<node pkg="rosbag"         type="record"                        name="rosbag_recorder"            output="$(arg output )" args="--all -O $(env ROSBAGS_DIR)/records.bag"                      />

</launch>
